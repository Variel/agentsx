# AGENTS.md

## 목표
이 저장소는 서로 다른 컴퓨터 간 코딩 에이전트 설정 동기화를 위한 Node.js CLI(`agentsx`)를 구현한다.

## 시작 전 필수
1. `REQUIREMENTS.md`를 먼저 읽고 요구사항을 기준으로 판단한다.
2. 요구사항과 구현이 불일치하면 코드가 아니라 요구사항을 우선 기준으로 삼는다.
3. 모호한 지점은 임의 해석하지 말고 명시적인 주석/문서 또는 테스트로 근거를 남긴다.

## 구현 원칙
- 확장 가능성을 최우선으로 설계한다.
- 새 에이전트 추가 시 기존 명령 로직 변경이 거의 없도록 어댑터/레지스트리 구조를 유지한다.
- 명령(`init/push/pull/sync`)은 공통 동기화 엔진을 재사용한다.
- 충돌 정책, 파일 비교, 복사 계획 생성은 순수 함수로 분리해 테스트 가능하게 만든다.

## 코드 품질 게이트
변경 후 아래를 모두 통과해야 한다.

1. 타입 체크
```bash
pnpm typecheck
```

2. 린트
```bash
pnpm lint
```

3. 테스트
```bash
pnpm test
```

필요 시 아래 통합 검증도 수행한다.
```bash
pnpm check
```

## 구현/리뷰 체크리스트
- 요구사항 반영 여부 (`REQUIREMENTS.md` 기준)
- 에이전트 레지스트리 확장성(하드코딩 분기 회피)
- 충돌 처리 정책 일관성(push/pull/sync)
- 상태 파일(`~/.agentsx`) 영속성 및 재사용 동작
- 예외 상황(초기화 안 됨, 인증 실패, 권한 실패) 에러 메시지 품질
- 커밋 전 `package.json` 버전 증가 여부 확인(변경 배포가 필요한 커밋은 반드시 버전 업)

## 문서 동기화 규칙
- 새로운 동작/옵션 추가 시 `REQUIREMENTS.md`를 먼저 갱신한다.
- 사용자-facing 동작 변경 시 README(추후 작성)와 도움말도 함께 갱신한다.
